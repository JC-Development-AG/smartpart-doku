<?xml version="1.0" encoding="UTF-8"?>
<ScriptObject><Version>1.0</Version>
<ScriptVersion>1.0</ScriptVersion>
<Name><![CDATA[CircularRebars]]></Name>
<LibPath><![CDATA[]]></LibPath>
<Type>1</Type>
<SubType>0</SubType>
<UUID>7084e469-4846-4851-b70b-dd4b1483d568</UUID>
<Language>de</Language>
<StringTable>
</StringTable>
<RelativeOrigin>0.5000000000000000 0.5000000000000000 0.5000000000000000</RelativeOrigin>
<AbsoluteOrigin>0.0000000000000000 0.0000000000000000 0.0000000000000000</AbsoluteOrigin>
<SeparateExecParts>1</SeparateExecParts>
<Group>0</Group>
<AutoPlaceResourceObjects>1</AutoPlaceResourceObjects>
<AutoReferenceBox>1</AutoReferenceBox>
<Scale>1</Scale>
<Use3DPreview>0</Use3DPreview>
<Link>0</Link>
<Consider>0</Consider>
<SimplePlacing>0</SimplePlacing>
<HeightReference>0</HeightReference>
<HeightOffset>0.0000000000000000</HeightOffset>
<UnitFactor>1.0000000000000000</UnitFactor>
<PositionNumber>1</PositionNumber>
<IsLocked>0</IsLocked>
<IsEncrypted>0</IsEncrypted>
<Key><![CDATA[]]></Key>
<DependentFiles>
</DependentFiles>
<Parameters>
<Type>1</Type>
<AutoUpdateValues>1</AutoUpdateValues>
<MapPenToColor>0</MapPenToColor>
<Parameter>
<Identifier>def_angles</Identifier>
<Name><![CDATA[Definitionswinkel]]></Name>
<Group><![CDATA[]]></Group>
<Type>2</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>0.000000000000</DoubleValue>
</Value>
</CurrentValue>
<ValueArray>
<Dimension>1</Dimension>
<Bounds>
<Bound Expandable="0">4</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
<Bound Expandable="0">0</Bound>
</Bounds>
<Values>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>0.000000000000</DoubleValue>
</Value>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>90.000000000000</DoubleValue>
</Value>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>0.000000000000</DoubleValue>
</Value>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>90.000000000000</DoubleValue>
</Value>
</Values>
</ValueArray>
</Parameter>
<Parameter>
<Identifier>def_radius_x</Identifier>
<Name><![CDATA[RadiusX]]></Name>
<Group><![CDATA[]]></Group>
<Type>6</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>5.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>def_radius_y</Identifier>
<Name><![CDATA[RadiusY]]></Name>
<Group><![CDATA[]]></Group>
<Type>6</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>5.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>layer0</Identifier>
<Name><![CDATA[Layer]]></Name>
<Group><![CDATA[]]></Group>
<Type>10</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>3864.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_color</Identifier>
<Name><![CDATA[Stabfarbe]]></Name>
<Group><![CDATA[]]></Group>
<Type>7</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>7.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_count</Identifier>
<Name><![CDATA[Stabanzahl]]></Name>
<Group><![CDATA[]]></Group>
<Type>5</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>5</Type>
<StringValue></StringValue>
<DoubleValue>28.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_length</Identifier>
<Name><![CDATA[Stablänge]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>0.500000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_pen</Identifier>
<Name><![CDATA[Stabstift]]></Name>
<Group><![CDATA[]]></Group>
<Type>8</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>3.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_pitch</Identifier>
<Name><![CDATA[Stababstand]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>0.150000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>rebar_stroke</Identifier>
<Name><![CDATA[Stabstrich]]></Name>
<Group><![CDATA[]]></Group>
<Type>9</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>ref_x</Identifier>
<Name><![CDATA[X-Abmessung]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>1</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>ref_y</Identifier>
<Name><![CDATA[Y-Abmessung]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>2</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>ref_z</Identifier>
<Name><![CDATA[Z-Abmessung]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>3</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>show_construction_lines</Identifier>
<Name><![CDATA[zeige Hilfslinien]]></Name>
<Group><![CDATA[]]></Group>
<Type>4</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>4</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>show_table</Identifier>
<Name><![CDATA[zeige Wertetabelle]]></Name>
<Group><![CDATA[]]></Group>
<Type>4</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>4</Type>
<StringValue></StringValue>
<DoubleValue>1.000000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>table_char_height</Identifier>
<Name><![CDATA[Tabellentexthöhe]]></Name>
<Group><![CDATA[]]></Group>
<Type>1</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>1.500000000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>table_pos_x</Identifier>
<Name><![CDATA[Wertetabelle-X]]></Name>
<Group><![CDATA[]]></Group>
<Type>6</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>7.569200000000</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
<Parameter>
<Identifier>table_pos_y</Identifier>
<Name><![CDATA[Wertetabelle-Y]]></Name>
<Group><![CDATA[]]></Group>
<Type>6</Type>
<Attribute>-1</Attribute>
<SystemID>0</SystemID>
<Expandable>0</Expandable>
<Hidden>0</Hidden>
<Lock>0</Lock>
<Export>0</Export>
<Save>1</Save>
<CurrentValue>
<Value>
<Type>6</Type>
<StringValue></StringValue>
<DoubleValue>4.707466666667</DoubleValue>
</Value>
</CurrentValue>
</Parameter>
</Parameters>
<Script><PartParameter>
<Enable>1</Enable>
<Text><![CDATA[! CircularRebars - Kreisbewehrung
! (c) 2012, Manfred Moitzi, smartparts.tzb-moitzi.at
! License: GPLv3, www.fsf.org

VALUES "rebar_count" RANGE [3, ) STEP 3, 1

]]></Text>
</PartParameter>
<PartMaster>
<Enable>1</Enable>
<Text><![CDATA[! CircularRebars - Kreisbewehrung
! (c) 2012, Manfred Moitzi, smartparts.tzb-moitzi.at
! License: GPLv3, www.fsf.org
]]></Text>
</PartMaster>
<Part2D>
<Enable>1</Enable>
<Text><![CDATA[! CircularRebars - Kreisbewehrung
! (c) 2012, Manfred Moitzi, smartparts.tzb-moitzi.at
! License: GPLv3, www.fsf.org



!--- definitions
DIM rebar_radius[rebar_count] ! radius of rebars
DIM rebar_start_angle[rebar_count] ! start angle of rebars
DIM rebar_end_angle[rebar_count] ! end angle of rebars
DIM placing_area_start_angle[rebar_count] ! start angle of placing area
DIM placing_area_end_angle[rebar_count] ! end angle of placing area
DIM results[rebar_count][2] ! tmp vars

GOSUB "setup_basic_values"

DEFINE STYLE "pitch" "Arial", 1.5, 6, 0
DEFINE STYLE "table" "Arial", table_char_height, 7, 0
LAYER layer0

!--- calculations
GOSUB "setup_rebar_radius"
GOSUB "setup_placing_area_angles"
GOSUB "setup_rebar_angles"

!--- graphics
IF PREV_MODE OR (show_construction_lines) GOSUB "draw_construction_lines"
GOSUB "set_rebar_styles"
FOR counter = 1 to rebar_count
   GOSUB "draw_rebars"
NEXT counter
IF show_table THEN GOSUB "draw_table"

!--- interactive part
GOSUB "place_handles"
END

!--- SUBROUTINES ------------------------------------------
"setup_basic_values":
rebar_spaces = rebar_count - 1
! def_radius = distance from (0, 0) to (def_radius_x, def_radius_y)
def_radius = SQR(def_radius_x^2 + def_radius_y^2)
! angle of def_radius
IF def_radius_x <> 0 THEN
   def_angle = ATAN(def_radius_y/def_radius_x)
   IF def_radius_x < 0 THEN
      def_angle = def_angle + 180
   ENDIF
ELSE
   IF def_radius_y > 0 THEN
      def_angle = 90
   ELSE
      def_angle = -90
   ENDIF
ENDIF
RETURN

"setup_rebar_radius":
rebar_radius[1] = def_radius
FOR i = 2 to rebar_count
   rebar_radius[i] =  rebar_radius[i-1] - rebar_pitch
NEXT i
RETURN

"setup_rebar_angles":
IF rebar_length = 0 GOTO "copy_placing_area_angles"
FOR i = 1 TO rebar_count
   alpha_rad = rebar_length / rebar_radius[i]
   alpha2 = alpha_rad / PI * 90 ! alpha_rad / 2 in degrees
   rebar_start_angle[i] = def_angle - alpha2
   rebar_end_angle[i] = def_angle + alpha2
NEXT i
RETURN

"copy_placing_area_angles":
FOR i = 1 TO rebar_count
   rebar_start_angle[i] = placing_area_start_angle[i]
   rebar_end_angle[i] = placing_area_end_angle[i]
NEXT i
RETURN

"setup_placing_area_angles":
! first cutting line is from: point at def_angle[1] -> point at def_angle[3]
cut_angle1 = def_angles[1]
cut_angle2 = def_angles[3]
GOSUB "calc_placing_area_points"
GOSUB "calc_placing_area_angles"
! copy results to 'placing_area_start_angle'
FOR i = 1 TO rebar_count
   placing_area_start_angle[i] = results[i][1]
NEXT i

! second cutting line is from: point at def_angle[2] -> point at def_angle[4]
cut_angle1 = def_angles[2]
cut_angle2 = def_angles[4]
GOSUB "calc_placing_area_points"
GOSUB "calc_placing_area_angles"
! copy results to 'placing_area_start_angle'
FOR i = 1 TO rebar_count
   placing_area_end_angle[i] = results[i][1]
NEXT i
RETURN

"calc_placing_area_points":
! setup cutting line x1/y1 -> x2/y2
x1 = COS(cut_angle1) * rebar_radius[1]
y1 = SIN(cut_angle1) * rebar_radius[1]
x2 = COS(cut_angle2) * rebar_radius[rebar_count]
y2 = SIN(cut_angle2) * rebar_radius[rebar_count]

! results for first and last intersection point are known, 
! the start and the end point of the cutting line:
results[1][1] = x1
results[1][2] = y1
results[rebar_count][1] = x2
results[rebar_count][2] = y2

dx = x2 - x1
dy = y2 - y1

IF x1 <> x2 THEN 
   k = dy / dx
   k1 = k^2 + 1
   d = y1 - x1 * k
ENDIF
! if x1 = x2: special case, treated separatly in the calculation loop!

! The cutting line intersects the circle at 2 points.
! In this scenario the cutting line can not be a 
! tangent or passant. We need the intersection point, 
! which is placed between x1/y1 and x2/y2.

! set x-borders of result area
IF x1 > x2 THEN
   rx1 = x2
   rx2 = x1
ELSE
   rx1 = x1
   rx2 = x2
ENDIF
! set y-borders of result area
IF y1 > y2 THEN
   ry1 = y2
   ry2 = y1
ELSE
   ry1 = y1
   ry2 = y2
ENDIF

FOR cut_index = 2 TO rebar_count-1
   cut_radius = rebar_radius[cut_index]
   IF x1 = x2 THEN
      sx1 = x1
      sx2 = x2
      sy1 = SQR(cut_radius^2 - x1^2)
      sy2 = -sy1
   ELSE
      term = SQR(k1*cut_radius^2 - d^2)
      sx1 = -(term + d * k) / k1
      sy1 = sx1 * k + d
      sx2 = ( term - d * k) / k1
      sy2 = sx2 * k + d
   ENDIF
   ! choose solution which is placed in the result area
   IF (sx1 >= rx1) AND (sx1 <= rx2) AND (sy1 >= ry1) AND (sy1 <= ry2) THEN
      results[cut_index][1] = sx1
      results[cut_index][2] = sy1
   ELSE
      results[cut_index][1] = sx2
      results[cut_index][2] = sy2
   ENDIF
NEXT cut_index
RETURN

"calc_placing_area_angles":
FOR i = 1 TO rebar_count
   x = results[i][1]
   y = results[i][2]
   IF x <> 0 THEN
   angle = ATAN(y/x)
   IF x < 0 THEN
      angle = angle + 180
   ENDIF
ELSE
   IF y > 0 THEN
      angle = 90
   ELSE
      angle = -90
   ENDIF
ENDIF
   results[i][1] = angle
NEXT i
RETURN

"draw_construction_lines":
! enter construction line mode
AUX_MODE 1
center_mark_size = 0.05
LINE2 -center_mark_size, 0, +center_mark_size, 0
LINE2 0, -center_mark_size, 0, +center_mark_size
IF rebar_length > 0 THEN ! else rebar = construction lines
   FOR i = 1 TO rebar_count
      ARC2 0, 0, rebar_radius[i], placing_area_start_angle[i], placing_area_end_angle[i]
   NEXT i
ENDIF
! exit construction line mode
AUX_MODE 0
RETURN

"set_rebar_styles":
COLOR rebar_color
PEN rebar_pen
STROKE rebar_stroke
RETURN

"draw_rebars":
FOR i = 1 TO rebar_count
   ARC2 0, 0, rebar_radius[i], rebar_start_angle[i], rebar_end_angle[i]
NEXT i
RETURN

"draw_table":
GOSUB "setup_table"
GOSUB "table_writer"
RETURN

"setup_table":
! set table styles
PEN 1
COLOR 1
STROKE 1
STYLE "table"

! setup table data
DIM rebar_table[rebar_count + 1][4]

! first row = table header
rebar_table[1][1] = `UPos.`
rebar_table[1][2] = `Länge [m]`
rebar_table[1][3] = `Radius [m]`
rebar_table[1][4] = `Delta [cm]`

prev_rebar_length = 0
length_sum = 0
FOR i = 1 TO rebar_count
   ! calculate delta length to previouse rebar
   l1 = rebar_radius[i] * (placing_area_start_angle[i] / 180 * pi)
   l2 = rebar_radius[i] * (placing_area_end_angle[i] / 180 * pi)
   rebar_length = ABS(l1-l2)
   IF i = 1 THEN
      delta = 0
   ELSE
      delta = ABS(prev_rebar_length - rebar_length)
   ENDIF
   table_row = INT(i + 1)
   rebar_table[table_row][1] = STR ( i, 3, 0 )
    rebar_table[table_row][2] = STR ( "%5.2m" , rebar_length)
   rebar_table[table_row][3] = STR ( "%8.2m" , rebar_radius[i])
    rebar_table[table_row][4] = STR ( "%5.2cm" , delta )
   prev_rebar_length = rebar_length
   length_sum = length_sum + rebar_length
NEXT i
rebar_table_footer = "Summe der Längen = " + STR("%7.2m" , length_sum) + " m"
RETURN

"table_writer":

__nrows__ = VARDIM1(rebar_table)
__ncolumns__ = VARDIM2(rebar_table)
DIM __column_width__[__ncolumns__]

__text_x_offset__ = 0.05

! setup  row height and table height
__row_height__ = table_char_height / 1000 * GLOB_SCALE * 2
__table_height__ = (__nrows__ + 0.5) * __row_height__ 

! calc column widths and table width
! first row = table header
__table_width__ = 0
FOR i = 1 TO __ncolumns__
   __text_width__ = STW(rebar_table[1][i]) / 1000 * GLOB_SCALE
   __column_width__[i] = __text_width__
   __table_width__ = __table_width__ + __text_width__
NEXT i

! draw table borders
RECT2 table_pos_x, table_pos_y, (table_pos_x + __table_width__), (table_pos_y - __table_height__)

! setup first row writing location
TRANS2 (table_pos_x + __text_x_offset__), (table_pos_y - __row_height__)

! write table rows
FOR __current_row__ = 1 TO __nrows__
   GOSUB "__write_table_row__"
   TRANS2 0, -__row_height__
NEXT __current_row__
IF (rebar_table_footer <> "") THEN TEXT2 0, -__row_height__, rebar_table_footer
RESTORE __nrows__ +  1
GOTO "__end_of__table_writer__":

!--- local subroutine
"__write_table_row__":
__xpos__ = 0 ! column x position
FOR __col__ = 1 to __ncolumns__
   TEXT2 __xpos__, 0, rebar_table[__current_row__][__col__]
   __xpos__ = __xpos__ + __column_width__[__col__]
NEXT __col__
RETURN
"__end_of__table_writer__":

RETURN

"place_handles":
HANDLE2 (def_radius_x), (0), 1, def_radius_y, 1
HANDLE2 (def_radius_x), (def_radius_y), 1, def_radius_y, 2
HANDLE2 (def_radius_x), (-1), 1, def_radius_y, 3
HANDLE2 (0), (def_radius_y), 1, def_radius_x, 1
HANDLE2 (def_radius_x), (def_radius_y), 1, def_radius_x, 2
HANDLE2 (-1), (def_radius_y), 1, def_radius_x, 3
HANDLE2 (rebar_radius[1]), (0), 2, def_angles[1], 4
HANDLE2 (COS(def_angles[1]) * rebar_radius[1]), (SIN(def_angles[1]) * rebar_radius[1]), 2, def_angles[1], 5
HANDLE2 (0), (0), 2, def_angles[1], 6
HANDLE2 (rebar_radius[1]), (0), 3, def_angles[2], 4
HANDLE2 (COS(def_angles[2]) * rebar_radius[1]), (SIN(def_angles[2]) * rebar_radius[1]), 3, def_angles[2], 5
HANDLE2 (0), (0), 3, def_angles[2], 6
HANDLE2 (rebar_radius[rebar_count]), (0), 4, def_angles[3], 4
HANDLE2 (COS(def_angles[3]) * rebar_radius[rebar_count]), (SIN(def_angles[3]) * rebar_radius[rebar_count]), 4, def_angles[3], 5
HANDLE2 (0), (0), 4, def_angles[3], 6
HANDLE2 (rebar_radius[rebar_count]), (0), 5, def_angles[4], 4
HANDLE2 (COS(def_angles[4]) * rebar_radius[rebar_count]), (SIN(def_angles[4]) * rebar_radius[rebar_count]), 5, def_angles[4], 5
HANDLE2 (0), (0), 5, def_angles[4], 6
IF show_table THEN
! table location handle
HANDLE2 (table_pos_x), (0), 6, table_pos_y, 1
HANDLE2 (table_pos_x), (table_pos_y), 6, table_pos_y, 2
HANDLE2 (table_pos_x), (-1), 6, table_pos_y, 3
HANDLE2 (0), (table_pos_y), 6, table_pos_x, 1
HANDLE2 (table_pos_x), (table_pos_y), 6, table_pos_x, 2
HANDLE2 (-1), (table_pos_y), 6, table_pos_x, 3
ENDIF

RETURN

]]></Text>
</Part2D>
<Part3D>
<Enable>0</Enable>
<Text><![CDATA[]]></Text>
</Part3D>
<PartDialog>
<Enable>1</Enable>
<Text><![CDATA[! CircularRebars - Kreisbewehrung
! (c) 2012, Manfred Moitzi, smartparts.tzb-moitzi.at
! License: GPLv3, www.fsf.org

I_PALETTE `2D Kreisbewehrung`, 1, 
"(c) 2012 Manfred Moitzi", "link=http://smartparts.tzb-moitzi.at TZBM", 
"General Public License v3 (GPLv3)", "link=http://www.gnu.org/licenses/ Lizenz"

I_SECTION `Eigenschaften`
I_INFIELD "rebar_count", 0,0,1,1
I_INFIELD "rebar_pitch", 0,0,1,1
I_INFIELD "rebar_length", 0,0,1,1 I_TOOLTIP `0 = alle Stäbe in realer Bereichslänge darstellen`
I_INFIELD "show_construction_lines", 0,0,1,1 
I_INFIELD "show_table", 0,0,1,1
I_INFIELD "table_char_height", 0,0,1,1 I_TOOLTIP `in [mm] am Papier`
I_SECTION_END

I_SECTION `Format`
I_INFIELD "rebar_pen", 0,0,1,1
I_INFIELD "rebar_stroke", 0,0,1,1
I_INFIELD "rebar_color", 0,0,1,1
I_INFIELD "layer0", 0,0,1,1
I_SECTION_END
]]></Text>
</PartDialog>
</Script>
<Drawing2D>
</Drawing2D>
<Drawing3D>
</Drawing3D>
<Pictures>
<ImportBitmaps>0</ImportBitmaps>
<ManageInList>1</ManageInList>
<Picture Name="0" Type="png" Width="146" Height="159"><![CDATA[89504E470D0A1A0A0000000D49484452000000920000009F080600000012E58050000000017352474200AECE1CE90000000467414D410000B18F0BFC6105000000097048597300000EC300000EC301C76FA86400000D7649444154785EED9D8172E3380E44F3FF3F3D3BD9AC37124D00AF414896655CD5555D2C88A4C0A7EEA693BDFDFAD3FFE90E1474E0AB608C1EA23BF0A7416A084A3AD02095B4B10769909A81920E3448256DEC411AA466A0A4030D52491B7B9006A91928E9408354D2C61EA4416A064A3AD02095B4B10769909A81920E3448256DEC411AA466A0A4030D52491B7B9006A91928E9408354D2C61EA4416A064A3AD02095B4B10769909A81920E3448256DEC416490BEBEBEFE44FFEDB67E5E076490488B22D0B6D7C9785D73FD0E1C0292F2D81674CA185DFBFA0EC820296AB3A23CE33CAF6F55AFC0EB800C52B69DABCAF3B83F3B7FDF776C074E03C97A8C19602EF993B07F6C8B7A74D20119A433AC4D55AFB641B2D5C7D6C8206597A32ACF6C1E0A4CDB607697F2F7C920AD04E87199AAF258F713DBCCB7A8EF241D9041DA0E4A6D8E2C241A97E6A6082A752D5DCF3AB004129BE24FF84D3851396A8D91AD91B9E87375DD6F07649022155A6D2ECD41DFF378B5041852B3FA3C9F72BF0C52D49808B44831D41C34B3C4CC18EABAA23E7CDAF572906803A9553DC6CB2A9595BD3A4BD19D62753248547132B6A1C045C1B294265A5F2B1403E8FF175D2BCF552B8058B6146D2CBDFE5DE7CD31BB967BEACFBA4B56A4AAF664E15A0166B4C9D9B3CCC68FE6ACEAC93B8F2383A45A9BD21C052E626D1100DEF5064AD9B9BF2768AD5CAF56E0F01482661A0F8099AD7DCF99014AEFC4BDEF381C240A075118E50417856C6A6BDB396727C07BE3C19F4E06E9486BCB6E145194518D3C85F320B4823A6FF93D2B6590D43650F0AC71334A158D4561507292659B6ABFDEB55E06C90363A509344B11B0B2215BB14305B295BEBCCBBD3248DE83ADAA8FA514DEDB9EB1B5316BAD2AD4ECFE7701A06A9DA520D1451155A19B3B0BE099203D83952A94A54EB41F77A893413AC2DAA8AD7D379C40E8D55485ECC75ABC034264B17700E8FF17B9F26188B5D1F9285C0A5854E594FC43D4E8138092158982109D9C3C6520F746358ABD5919CCB23B6B6C4F9D660AB6DACB2BDD2F834454477D0389AA50358982F4D61EA38DF76A094C96FD5D0980AAB5C820291313E83CE520AA15D544A73A0AE8388E17C467638ED02A7D7C87DA4341220D38230B59CA92FD3C52329A9B487FDEA5460689A8CCEAC92E52992D005E30B632CEEAE70414CBD6B6735BD9EC5DE0D9BD50672F5ACD43346F7956E381335E5B09DE19C0E8F39DBD4FEA7C69455227B2EA295844A5325635BB4781929CEC0860EF0E940CD2782A52AC8EC047C0526A68982656B47D76929332A1FB5DED2E0D1281C2DA44E5ED5B8126A3505EE68A4E5E339B8CAC93285AA6D767DF2383B41AA4676F32B52D0F8CEC35CFC62235239665299D07E5F73F9F30F96714CE66439A4F06C91B3DB239B232A2405B68BC203D9B6F35FF100B2480C54AF55E309582148192018D8065299AA77414285A97539E7DFB47257A276592418A6050F28F97A1C8296F5571669BEF056A6B3E2F78C7CA730F98649022D5D96EC44A9E22407A35AA92108BB44E5451608E61DADBD83B2AD3612045C011CB8AB2D008ADAA5033458C544705942A5C04CFD56D4E06895A1B05C552300F0A65333DD8AC501C294CD6129F954953A22B9FE4649022A521D9C6B28859D6A8B2AF0AA0228B9AA94F748FAA44A477D93D5AB94F06896417B2A015C5B242BA12DE89EAD09358345685126DC7B8224C3248344C6F4151C18AEACFB6B671BE081C06A0666BE3985783290D52B4D9AA4D65EABD5354F6846585E3D946C6B6A51DEDE736F73B46349FB227D5B5324856D85616E605F62864535B7B6CBCA51EB34DA19F8DD0CF5E020B483513454A7415659241A2615AB5B699657A50A97988D8D1CC92984D3DB7719F69341BFB816DAE44F4399417BBA2B60C246F31AA028D502940454A340330F399AA5E954A74458B9341F2A0C89CE8C8E9CD1BD753BED97D959F117518BFFBD9FEBC9289AE06930C1291C1AC026DD5C4CB366AC856E051D5C91AFB5755355B5332D195603A04246A73119444892CDBA37638CE9185EE79539F01DA87F2DF9FBC4C1465B4ABC0248344AC8D066D626B5EE689F290A75C91F230DB1A8FF7CFC77D1F9EFD2AAC80BDA252D1CB5A755D06499D984215D95A74DD9AE77C986C2BFB59E3F14A643DB3BA774AFDE120EDDF48FB5FF53E5388156B1BDF6EA230968D44F631B3B52394C853264FCD1420B2B5324895D63683CCCB365E002759290AC68F31087424133DD4E75989224BB4BFCDBE2A4C32482AB11678D6389E0A65321109CFA4C656ABD1AAF63F6FE1DCDBDA8F3A5BF0460AF3B8EEA9E599162783340343852BCA3B1E30FB8D997FA34C14C5026366B1A3728EB6157F37F47347B42E0A96A74AD1B5CC5E917B649022EB511528822A0AEB9682292A13E5A9D95B4FE1F979BEAD4AED95885A5504BE05E159AA5402122276F3AF59F7EA3D703CDBF3808A5426DAA4F975ED8B46CF82284C156390BDCAD4C82045619B2C225299AC7D79F631579538F43EABD5565D6298B6CFE2014DB34E451DD923B54606299A40B5360295625F5BABAC50A267B588E119AD6C15A62A253AD2E6CA41B24023213D822A03541D4C354A74041434A45F0AA4C8DABC1C33DBD4088ED9C347F76CE7B1427704D8789FFA67207473A37C464374A62E7217E5FA618A5469710A385E4E1A018B60FA194B53226A6B34EBD0209EAD5360F16A0F0389585C54632918F9DC52A2E7F0FC1CB8F7352A4C7680CFC2B385842A1DAD7B194867595B149AA9E55975B13AD52891A714D96B14125A5701D3618A44C27594651ED733D64694C79B7F251355007276765A85490669044459C0F6DEC8D63CC5F12CC2531A725F55263A02266BFDD432C9F32BFBB9EB75F6C6512D2AC3F56CEC592E228A366B9EA756AF50A26C50CE9CD43CBB5B6141562475324585BCB1954C44DEBCE79AEB6422AA3014400A9CBAB74B8AE485ED6821516E8AA0F3B2D24CB1949C54A94474832BEAB663D0707D842A952A5204CA0CB428482B4A648D6FE5261D9EE7DFE4D34CB6BAC947DD3FEB6F2408D33E676E52EEA170796A4495C86A8A6F15DAF744D52A328E67290C0DEFD416AB55495624CFDAAC0D8F6C875E9F8D3F7E46A09BFDBF9F29A7B50A98321B4EE72599E8E5201135AA50A147D32C6B9BC137DA8CB7593FE3EF47F1619AFF35A6A72815D728701925AB84495624029292851EB59E9AADE4A4E78DB0E119E17ACE50F5BFFE50D5E3AAAA741A48233056268AC23751A2C82A67217BAF66BF3FC5AA96FB03FEC7B8547148D82635144455304E0789AA95075A0CCACC86E250FD0B7BEE74E6D93005C6B2287ABFAA7055F6760990227BCB05EAD91FD92B30C57F86BB5DF7EC7F7B6F7F75A689142E03A2A24A970289009509D4D1896C558928308AAD4460D0B15614EAED41B2DEEEB1799E0A44F08CD747405714866EF215556966CF04A84B2A92B5A99E62CD4E6767C394B10F12902BC755158A40F4EF0B410B5F59E79DE49EADEEF713F22B908C12AD2A8E05C651C058CA47D741F6FE2D4052AC8EC093B1357A22AB8481589F3A9F5A4F207A1B456256A72951E68FF4B39B30B393CC58AA2DA9F51EB811506FA5487E468A8FF6154A44002035ABF6B8A256647D6AE87E4B90EC13950A13FB950709C49560D0B154C559A9BFA522EDAD4E8567DF12F2767A1B7BC6A61FA13E2A54B707E9A7C92A4C4C893290AC9E90D40DCED6931748B1B7B7B63655996C4BD4C1221B910191D8288187004DC6A130DD0624A64C6BBFA9A7605875E47B9B230025C010F03C7BBB1548164CD6D707994DA33091CDBB6A8DA78A164CB703690E13B3AE0C58C48AC8DBAE8EB332E60AC01F05D203A64A25AA846C652367F7AA6B5B99FFE340528EECE478FD4A4BAB561F029E573383E996D6469488347384E795303DD64BD4A41ABC591F46983E0A2445A5C886BD430D59A30ADE472A52B5AA1CAD4A64E38FAC21637F2C4854893276471A7F640D39ED65E757BE06B8BDB5A97949DD180B52026576835754B16ACE8FCB4804A4958D59B9F715B0A92F0A55A58F52A4954D7F00199D9ED4E01A2904D978654E022F19EFA3158966A5AAEF95080411482AFCD573B622CD8E16FF7D56BD7947E424A20AB3E7208AA33C7F83044122EAA36E8E0201199B8C476A225B56C1DCE54FA7DFB7BEA4BC95AABD904D2535EAC65250C8B393F535487F3B602901F95CA9218A433656A9896AC99A1A244147A38613DB230D8FE621015999878C17AD89CCD78A3409DDA4714AF395F1AA1442595F456D83B4E980924394E61390484DB43EC5668F98EFD1CA8FFB4272743E058EECA691B0AEACA362BCAAF91AA489BD659B5B91492AC6501487D829E9478334B1B7AB2B0ED9D8474DC5B390F91AA4202791131B69F4D91B1BAD29BAAEA85A87ED212829CD551B1D8D1D5D3F12E868EEE87A8374004856008E3623BA5E11ACB3F093DCD6D606603A63932B42AFB24E0287325E83248254F156578C31DB6475E3A3FAE8FAA892FFFE3C7EAFF2A93F2BCD536AB3969785EE15F33548C2C9ED9559A5022A057EA5B6AD0D581B8127BBC9EA66CDBE4650C638AAB6419A787865FE386AE39471B390ABF7B5B501553A63E3943994DAB3F25283044052DFCE8C055D110EE5391AA48B809485357B9F022EA96D904490AEB271AB598EC0D18AB4F04558758395CDC8D45E05EC56A456A4DD3F0411BD48EEAF57165EE0DBDD1A35F20C0538630EE539C97A6445DA2EE07614FD7D20A5C147D5928D3B332391F53448777C1B5EF44CFD4BDB1735FE6ED3364877DBD1173D4F83F4A2C6DF6DDA06E96E3BFAA2E7F907DAD588DFD5A114AD0000000049454E44AE426082]]></Picture>
</Pictures>
</ScriptObject>